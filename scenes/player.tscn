[gd_scene load_steps=4 format=2]

[ext_resource path="res://assets/astro.png" type="Texture" id=1]

[sub_resource type="GDScript" id=2]
script/source = "extends KinematicBody2D


# Declare member variables here. Examples:
# var a = 2
# var b = \"text\"

const SPEED = 32
const JUMP_SPEED = 128
const GRAVITY = 10
const FLOOR_Y_VELOCITY = 5
const MAX_FALL_SPEED = 1200

var y_velocity = 0
var x_velocity = 0

var moving_direction = 0
var is_moving = false
var is_jumping = false

# Called when the node enters the scene tree for the first time.
func _ready():
	pass # Replace with function body.


# Called every frame. 'delta' is the elapsed time since the previous frame.
func _process(delta):

	if Input.is_action_pressed(\"move_left\"):
		moving_direction = -1
		is_moving = true
		$sprite.flip_h = true
	elif Input.is_action_pressed(\"move_right\"):
		moving_direction = 1
		is_moving = true
		$sprite.flip_h = false
	else :
		moving_direction = 0
		is_moving = false
	
	var is_on_floor = is_on_floor()
	var is_jumping = Input.is_action_pressed(\"jump\")
	
	y_velocity += GRAVITY
	x_velocity = moving_direction * SPEED
	
	# If we're on the floor and jumping
	if is_on_floor and is_jumping:
		y_velocity -= JUMP_SPEED
	# Apply static velocity if on floor
	elif is_on_floor :
		y_velocity = FLOOR_Y_VELOCITY
	# If we're in the air, make sure we hit terminal velocity.
	elif !is_on_floor && y_velocity > MAX_FALL_SPEED:
		y_velocity = MAX_FALL_SPEED
	
	var linear_velocity = Vector2(x_velocity, y_velocity)
	move_and_slide_with_snap(linear_velocity, Vector2.DOWN, Vector2.UP, false)
	
	
func _physics_process(delta):	
	move_and_slide(Vector2(x_velocity, y_velocity), Vector2.UP)
"

[sub_resource type="RectangleShape2D" id=1]
extents = Vector2( 6, 8 )

[node name="player" type="KinematicBody2D"]
script = SubResource( 2 )

[node name="sprite" type="Sprite" parent="."]
texture = ExtResource( 1 )

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource( 1 )
